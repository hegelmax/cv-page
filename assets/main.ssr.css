:root {
  --brand: #0a84ff;
  --brand-ink: #fff;
  --ink: #1f2937;            /* slate-800 */
  --muted: #6b7280;          /* slate-500 */
  --bg: #e5e7eb;
  --chip: #f3f4f6;           /* slate-100 */
  --ring: rgba(10,132,255,.35);
  --radius: 18px;
}

* { box-sizing: border-box; }
html, body { height: 100%; }

body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  background: var(--bg);
  margin: 0;
  padding: 0;
  color: var(--ink);
}

a { color: inherit; text-decoration: none; }
a.grey-link { color: #374151; border-bottom: 1px dotted rgba(55,65,81,.4); }
a.grey-link:hover { border-bottom-color: rgba(55,65,81,.7); }

#app {
  max-width: 920px;
  margin: 28px auto 44px;
  padding: 24px 32px;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,.06);
  min-height: 140px;
}

/* --- Track chooser --- */
.center { text-align: center; }
.muted  { color: var(--muted); }

.chooser {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 18px;
  padding: 18px 0 6px;
}

.card {
  border: 1px solid #e5e7eb;
  border-radius: var(--radius);
  padding: 18px;
  display: flex;
  align-items: center;
  gap: 14px;
  transition: transform .08s ease, box-shadow .12s ease, border-color .12s ease;
  cursor: pointer;
  background: #fff;
}
.card:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 24px rgba(0,0,0,.07);
}
.card i { font-size: 28px; color: var(--brand); width: 34px; text-align: center; }
.card h3 { margin: 0 0 6px; font-size: 18px; font-weight: 700; letter-spacing: .2px; }
.card p  { margin: 0; color: var(--muted); font-size: 13px; line-height: 1.45; }

/* --- Topbar (supports <a.btn> and <button>) --- */
.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 0 2px 10px 2px;
  margin-bottom: 6px;
}

.seg {
  display: inline-flex;
  border: 1px solid #e5e7eb;
  border-radius: 999px;
  overflow: hidden;
  background: #fafafa;
}
.seg a.btn,
.seg button {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  font-size: 13px;
  border: 0;
  background: transparent;
  cursor: pointer;
  transition: background-color .12s ease, color .12s ease;
}
.seg a.btn:hover,
.seg button:hover { background: #f3f4f6; }
.seg a.btn.active,
.seg button.active {
  background: var(--brand);
  color: var(--brand-ink);
}
.seg a.btn:focus-visible,
.seg button:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
  border-radius: 999px;
}

.ghost {
  background: transparent;
  border: 1px dashed #d1d5db;
  padding: 8px 10px;
  border-radius: 10px;
  font-size: 12px;
  color: #6b7280;
  cursor: pointer;
}
.ghost:hover { border-color: #9ca3af; color: #374151; }

.loading {
  text-align: center;
  color: #6b7280;
  font-size: 14px;
  padding: 16px 0;
}

/* --- Header & content --- */
.header {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: start;
  gap: 16px;
}
.title h1 {
  font-size: 30px;
  font-weight: 800;
  margin: 0 0 6px;
  letter-spacing: .3px;
}
.subtitle { color: var(--brand); font-weight: 600; font-size: 15px; margin: 0; }
.image img { width: 100px; border-radius: 8px; }
.contact {
  margin-top: 12px;
  font-size: 14px;
  color: #4b5563;
  display: flex;
  flex-wrap: wrap;
  gap: 8px 18px;
}
.contact span { display: inline-flex; align-items: center; gap: 8px; }

.section-title {
  font-size: 15px;
  font-weight: 800;
  letter-spacing: .2px;
  margin: 36px 0 14px;
  padding-bottom: 6px;
  border-bottom: 1px solid #e5e7eb;
  text-transform: uppercase;
  color: #111827;
}

.two-column {
  display: grid;
  grid-template-columns: 60% 36%;
  gap: 4%;
}

.job { margin-bottom: 24px; }
.job h3 { font-size: 16px; font-weight: 800; margin: 0 0 6px; }

.job_info {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 8px;
}

.company { font-size: 14px; font-weight: 600; color: #111827; }
.company_name { color: var(--brand); }
.details { font-size: 13px; color: #6b7280; }

.education { margin-bottom: 12px; }
.university { margin-block: auto; }

.job ul {
  padding-left: 18px;
  font-size: 13px;
  color: #374151;
  margin: 0;
}
.job ul li { margin-bottom: 6px; }

.project { margin-left: 14px; }
.project-title,
.project-name { font-weight: 700; font-size: 14px; }
.project-desc { font-size: 13px; color: #4b5563; margin-bottom: 10px; }

.badge {
  display: inline-block;
  background: var(--chip);
  border-radius: 999px;
  padding: 5px 10px;
  font-size: 12px;
  margin: 4px 6px 4px 0;
  line-height: 1;
}

.lang-badge {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: 4px 10px 4px 0;
  font-size: 13px;
}
.lang-badge span { margin-left: 6px; font-size: 11px; color: #6b7280; }
.lang-badge .level { font-size: 8px; }

.achiv, .publ, .award { font-weight: 700; font-size: 14px; }
.achiv-desc, .publ-desc, .award-desc { font-size: 13px; color: #4b5563; margin-bottom: 10px; }

.cert-title { font-size: 14px; font-weight: 800; color: var(--brand); margin-top: 10px; }
.cert-desc { font-size: 13px; color: #4b5563; margin-bottom: 10px; }

.footer {
  text-align: center;
  margin-top: 22px;
  font-size: 12px;
  color: #9ca3af;
}

/* --- Responsive --- */
@media (max-width: 700px) {
  #app { padding: 18px 18px; margin: 16px; }
  .two-column { grid-template-columns: 1fr; gap: 16px; }
  .chooser { grid-template-columns: 1fr; }
  .image img { width: 100px; }
}
@media (max-width: 420px) {
  .title h1 { font-size: 26px; }
  .subtitle { font-size: 14px; }
}

/* --- Print (force light theme) --- */
@media print {
  /* force light palette and clean print */
  :root, [data-theme="dark"] {
    color-scheme: light;
    --bg: #ffffff; --ink: #1f2937; --muted: #6b7280; --chip: #f3f4f6;
    --brand: #0a84ff; --brand-ink: #ffffff; --ring: rgba(10,132,255,.35);
  }

  body { background: #fff !important; }
  #app { max-width: 830px; margin: auto; padding: 0; box-shadow: none; border: 0; }
  .section-title { margin-top: 10px; margin-bottom: 6px; }
  .footer { margin-top: 6px; }
  .seg, .chooser, .topbar .ghost, .theme-btn { display: none !important; }
  .education { margin-bottom: 6px; }
  
  .badge {
    background: var(--chip) !important;
    color: #000 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
}

/* === Dark theme ======================================================= */
[data-theme="dark"] {
  color-scheme: dark;
  --bg: #0b0f14;
  --ink: #e5e7eb;            /* text */
  --muted: #9aa4b2;          /* secondary text */
  --chip: #1b2330;           /* pills background */
  --brand: #7cc0ff;          /* accent */
  --brand-ink: #0a0e14;      /* text over brand */
  --ring: rgba(124,192,255,.45);
}

[data-theme="dark"] body {
  background: #0a0e14;
  color: var(--ink);
}

[data-theme="dark"] #app {
  background: #0f1520;
  box-shadow: 0 14px 40px rgba(0,0,0,.45);
  border: 1px solid rgba(255,255,255,.06);
}

[data-theme="dark"] .card {
  background: #0f1520;
  border-color: rgba(255,255,255,.06);
}
[data-theme="dark"] .card:hover {
  box-shadow: 0 14px 34px rgba(0,0,0,.6);
  border-color: rgba(255,255,255,.12);
}

[data-theme="dark"] .seg {
  background: #0c1118;
  border-color: rgba(255,255,255,.08);
}
[data-theme="dark"] .seg a.btn,
[data-theme="dark"] .seg button { color: var(--ink); }
[data-theme="dark"] .seg a.btn:hover,
[data-theme="dark"] .seg button:hover { background: rgba(255,255,255,.06); }
[data-theme="dark"] .seg a.btn.active,
[data-theme="dark"] .seg button.active {
  background: var(--brand);
  color: var(--brand-ink);
}

[data-theme="dark"] .section-title {
  color: #e8eef6;
  border-bottom-color: rgba(255,255,255,.08);
}
[data-theme="dark"] .company { color: var(--ink); }
[data-theme="dark"] .company_name { color: var(--brand); }

[data-theme="dark"] .badge { background: darkgray; color: black; }
[data-theme="dark"] .details,
[data-theme="dark"] .contact { color: var(--muted); }
[data-theme="dark"] .project-desc,
[data-theme="dark"] .achiv-desc,
[data-theme="dark"] .publ-desc,
[data-theme="dark"] .award-desc,
[data-theme="dark"] .cert-desc { color: #b9c3d0; }

/* Links */
[data-theme="dark"] a.grey-link {
  color: #cfe3ff;
  border-bottom-color: rgba(207,227,255,.35);
}
[data-theme="dark"] a.grey-link:hover { border-bottom-color: rgba(207,227,255,.7); }

/* Ghost button */
[data-theme="dark"] .ghost {
  border-color: rgba(255,255,255,.18);
  color: #c9d3df;
}
[data-theme="dark"] .ghost:hover {
  border-color: rgba(255,255,255,.35);
  color: #e9eef5;
}

/* Loading text */
[data-theme="dark"] .loading { color: #c9d3df; }

/* === Floating theme button =========================================== */
.theme-btn {
  position: fixed;
  right: 16px;
  top: 16px;
  z-index: 50;
  border: 1px solid #e5e7eb;
  background: #ffffff;
  color: #111827;
  border-radius: 999px;
  width: 38px;
  height: 38px;
  display: grid;
  place-items: center;
  cursor: pointer;
  box-shadow: 0 10px 24px rgba(0,0,0,.08);
  transition: transform .12s ease, background .12s ease, color .12s ease, border-color .12s ease;
}
.theme-btn:hover { transform: translateY(-1px); }
.theme-btn:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}

/* dark appearance of the floating button */
[data-theme="dark"] .theme-btn {
  background: #0f1520;
  color: #e5e7eb;
  border-color: rgba(255,255,255,.12);
  box-shadow: 0 14px 34px rgba(0,0,0,.6);
}


/* Выпадающий список в топбаре вместо кнопок при 4+ резюме */
.topbar .seg-select {
  display: inline-block;
  min-width: 220px;          /* чтобы не был слишком узким */
  padding: 6px 10px;
  border-radius: 999px;      /* как pill-кнопки */
  border: 1px solid rgba(0,0,0,0.2);
  font-size: 14px;
  line-height: 1.3;
  background: #ffffff;
  color: #222222;
  cursor: pointer;
  outline: none;
  appearance: none;          /* убираем системный стиль, где поддерживается */
}

/* Небольшая стрелочка справа (имитация select arrow) */
.topbar .seg {
  position: relative;
}

.topbar .seg-select {
  padding-right: 28px;       /* место под стрелку */
  background-image: linear-gradient(45deg, transparent 50%, #666 50%),
                    linear-gradient(135deg, #666 50%, transparent 50%);
  background-position: calc(100% - 14px) 50%, calc(100% - 9px) 50%;
  background-size: 6px 6px, 6px 6px;
  background-repeat: no-repeat;
}

/* Фокус/hover для селекта */
.topbar .seg-select:focus,
.topbar .seg-select:hover {
  border-color: rgba(0,0,0,0.35);
}

/* На очень узких экранах можно растянуть селект */
@media (max-width: 600px) {
  .topbar .seg-select {
    width: 100%;
  }
}

/* Контейнеры для кнопок и селекта в сегменте */
.topbar .seg-buttons {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  align-items: center;
}

.topbar .seg-select-wrapper {
  display: none; /* по умолчанию скрыт, включаем ниже */
}

/* Селект стилизуем под pill-кнопку */
.topbar .seg-select {
  display: inline-block;
  min-width: 220px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,0.2);
  font-size: 14px;
  line-height: 1.3;
  background: #ffffff;
  color: #222222;
  cursor: pointer;
  outline: none;
  appearance: none;
  padding-right: 28px; /* место под стрелку */
  background-image: linear-gradient(45deg, transparent 50%, #666 50%),
                    linear-gradient(135deg, #666 50%, transparent 50%);
  background-position: calc(100% - 14px) 50%, calc(100% - 9px) 50%;
  background-size: 6px 6px, 6px 6px;
  background-repeat: no-repeat;
}

.topbar .seg-select:focus,
.topbar .seg-select:hover {
  border-color: rgba(0,0,0,0.35);
}

/* ==== ЛОГИКА ОТОБРАЖЕНИЯ ==== */

/* 4+ треков — везде только селект */
.topbar.topbar--many .seg-buttons {
  display: none;
}
.topbar.topbar--many .seg-select-wrapper {
  display: block;
}

/* 2–3 трека: desktop — кнопки, mobile — селект */

.topbar.topbar--few .seg-buttons {
  display: flex;
}
.topbar.topbar--few .seg-select-wrapper {
  display: none;
}

/* На узких экранах всегда селект */
@media (max-width: 640px) {
  .topbar.topbar--few .seg-buttons {
    display: none;
  }
  .topbar.topbar--few .seg-select-wrapper {
    display: block;
  }

  .topbar .seg-select {
    width: 100%;
  }
}
